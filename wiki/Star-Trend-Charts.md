# Star Trend Charts

GitHub Star Tracker generates interactive charts to visualize your repository star growth over time using [QuickChart.io](https://quickchart.io/).

## üìä Chart Types

### 1. Total Stars Chart

Shows the **cumulative star count** across all your tracked repositories.

**Features:**

- Line graph with gradient fill
- Timeline on X-axis (formatted per locale)
- Star count on Y-axis
- Responsive design (800x400px)

**Example:**

![Total Stars Chart](https://quickchart.io/chart?c=%7Btype%3A%27line%27%2Cdata%3A%7Blabels%3A%5B%27Jan%201%27%2C%27Jan%208%27%2C%27Jan%2015%27%5D%2Cdatasets%3A%5B%7Blabel%3A%27Total%20Stars%27%2Cdata%3A%5B100%2C105%2C112%5D%2CbackgroundColor%3A%27rgba%2875%2C192%2C192%2C0.2%29%27%2CborderColor%3A%27rgba%2875%2C192%2C192%2C1%29%27%7D%5D%7D%7D)

### 2. Top 5 Repositories Comparison Chart

Shows **individual trend lines** for your 5 most-starred repositories.

**Features:**

- Multi-line chart with distinct colors per repository
- Compare growth rates across repositories
- Legend showing repository names
- Maximum 5 repositories (most popular)

**Example:**

![Comparison Chart](https://quickchart.io/chart?c=%7Btype%3A%27line%27%2Cdata%3A%7Blabels%3A%5B%27Jan%201%27%2C%27Jan%208%27%5D%2Cdatasets%3A%5B%7Blabel%3A%27repo-a%27%2Cdata%3A%5B50%2C55%5D%2CborderColor%3A%27%2336A2EB%27%7D%2C%7Blabel%3A%27repo-b%27%2Cdata%3A%5B30%2C32%5D%2CborderColor%3A%27%23FF6384%27%7D%5D%7D%7D)

---

## ‚öôÔ∏è Enabling Charts

Charts are **enabled by default**. To explicitly control:

```yaml
- uses: fbuireu/github-star-tracker@v1
  with:
    github-token: ${{ secrets.STAR_TRACKER_TOKEN }}
    include-charts: true # Default
```

### Disabling Charts

To generate text-only reports:

```yaml
with:
  include-charts: false
```

**When to disable:**

- You only need JSON data
- Reducing QuickChart API calls
- Faster report generation
- Email size constraints

---

## üé® Chart Appearance

### Colors

Charts use predefined color schemes:

**Total Stars Chart:**

- Line: `rgba(75, 192, 192, 1)` (teal)
- Fill: `rgba(75, 192, 192, 0.2)` (teal with transparency)

**Comparison Chart (up to 5 repositories):**

1. Blue: `#36A2EB`
2. Red: `#FF6384`
3. Yellow: `#FFCE56`
4. Green: `#4BC0C0`
5. Purple: `#9966FF`

Colors are **not currently customizable** but may be in future versions.

### Dimensions

- **Width:** 800px
- **Height:** 400px
- **Format:** PNG image
- **DPI:** Optimized for web and email

### Localization

Chart labels and dates are automatically localized based on your `locale` setting:

```yaml
with:
  locale: 'es' # Spanish labels
```

**Localized elements:**

- Chart title
- Axis labels
- Date formatting (e.g., "13 Feb 2026" vs "13 feb 2026")
- Legend labels

---

## üìà Data Points

### Maximum Data Points

Charts display up to **30 data points** (QuickChart limitation).

**What happens with more data:**

- Older snapshots are **excluded** from charts
- JSON data still contains all historical snapshots
- Most recent 30 runs are visualized

**Example:**

```
Total snapshots: 100
Chart shows: Most recent 30
JSON contains: All 100
```

### Minimum Data Points

- **First run:** No chart (need at least 2 data points for trends)
- **Second run:** Chart appears with 2 points
- **Ideal:** 7+ data points for meaningful trends

---

## üîç Chart Rendering

### In Data Branch README

Charts are embedded as images in the Markdown:

```markdown
## Star Trend

![Star Trend](https://quickchart.io/chart?c={...})

## Top Repositories

![Top Repositories](https://quickchart.io/chart?c={...})
```

GitHub automatically renders these URLs as images.

### In HTML Emails

Charts are embedded as inline images:

```html
<img src="https://quickchart.io/chart?c={...}" alt="Star Trend Chart" style="max-width: 100%;" />
```

**Benefits:**

- No external dependencies (charts load from QuickChart CDN)
- Work in all email clients
- Responsive on mobile devices

---

## üöÄ Chart Generation

### How It Works

1. Action collects historical star data
2. Formats data for QuickChart API
3. Generates Chart.js configuration
4. URL-encodes configuration
5. Creates QuickChart URL
6. Embeds URL in reports

### Chart.js Configuration

Under the hood, charts use [Chart.js](https://www.chartjs.org/) configuration:

```javascript
{
  type: 'line',
  data: {
    labels: ['Jan 1', 'Jan 8', 'Jan 15'],
    datasets: [{
      label: 'Total Stars',
      data: [100, 105, 112],
      backgroundColor: 'rgba(75, 192, 192, 0.2)',
      borderColor: 'rgba(75, 192, 192, 1)',
      borderWidth: 2
    }]
  },
  options: {
    scales: {
      yAxes: [{
        ticks: { beginAtZero: true }
      }]
    }
  }
}
```

### API Endpoint

Charts are generated by QuickChart.io:

```
https://quickchart.io/chart?c={urlEncodedConfig}
```

**Limits:**

- URL length: ~2048 characters (browser limit)
- Requests: No authentication required
- Rate limits: Fair use policy
- Availability: 99.9% uptime SLA

---

## üõ†Ô∏è Advanced Usage

### Accessing Chart URLs

Chart URLs are embedded in outputs:

```yaml
- name: Track stars
  id: tracker
  uses: fbuireu/github-star-tracker@v1
  with:
    github-token: ${{ secrets.STAR_TRACKER_TOKEN }}

- name: Extract chart URL
  run: |
    echo "${{ steps.tracker.outputs.report }}" | grep -oP 'https://quickchart\.io/chart\?c=[^)]*'
```

### Custom Chart Processing

Download and modify charts:

```bash
# Download chart as PNG
curl "https://quickchart.io/chart?c={...}" -o chart.png

# Convert to PDF (requires ImageMagick)
convert chart.png chart.pdf

# Resize
convert chart.png -resize 400x200 chart-small.png
```

### Embedding in External Sites

Use chart URLs anywhere:

```html
<img src="https://quickchart.io/chart?c={...}" alt="Star Trend" />
```

**Note:** URLs contain all chart data ‚Äî no API key or external data source needed.

---

## üìä Chart Data Sources

### Historical Snapshots

Charts use data from `stars-data.json`:

```json
[
  {
    "timestamp": "2026-02-13T00:00:00.000Z",
    "repositories": [
      { "name": "repo-1", "stars": 50 },
      { "name": "repo-2", "stars": 30 }
    ],
    "totalStars": 80
  },
  {
    "timestamp": "2026-02-06T00:00:00.000Z",
    "repositories": [
      { "name": "repo-1", "stars": 45 },
      { "name": "repo-2", "stars": 28 }
    ],
    "totalStars": 73
  }
]
```

### Data Aggregation

**Total Stars Chart:**

- X-axis: `timestamp` (formatted per locale)
- Y-axis: `totalStars` (sum of all repositories)

**Comparison Chart:**

- X-axis: `timestamp` (formatted per locale)
- Y-axis: Individual repository `stars`
- Series: Top 5 repositories by current star count

---

## ‚ö†Ô∏è Limitations

### QuickChart API

- **Max URL length:** ~2048 characters
- **Max data points:** 30 per chart (enforced by action)
- **Max datasets:** 5 repositories for comparison chart
- **No authentication:** Public API (fair use)

### Browser Rendering

- Very large datasets may cause slow rendering
- Some email clients may block external images
- Mobile browsers may scale charts automatically

### Data Privacy

- Chart URLs contain your repository names and star counts
- URLs are **public** (no authentication)
- Anyone with the URL can view the chart
- Consider this for private repositories

---

## üêõ Troubleshooting

### Chart Not Displaying

**Possible causes:**

1. **First run** ‚Äî Need at least 2 data points
2. **Charts disabled** ‚Äî Check `include-charts: true`
3. **Image blocking** ‚Äî Email client or browser blocking external images
4. **Malformed URL** ‚Äî Check workflow logs for errors

**Solutions:**

```yaml
# Verify charts enabled
with:
  include-charts: true

# Check output
- name: Debug
  run: |
    echo "${{ steps.tracker.outputs.report }}" | grep quickchart
```

### Chart Shows Wrong Data

- **Stale data:** Data branch not updated (check workflow logs)
- **Wrong locale:** Date formatting looks incorrect (verify locale setting)
- **Missing snapshots:** Check `stars-data.json` has sufficient history

### Chart URL Too Long

If you have many repositories:

- Action automatically limits to 30 data points
- Comparison chart limited to top 5 repositories
- This should prevent URL overflow
- If issues persist, report a bug

---

## üìö Further Reading

- [QuickChart.io Documentation](https://quickchart.io/documentation/)
- [Chart.js Documentation](https://www.chartjs.org/docs/)
- [GitHub Star Tracker Examples](Examples)

---

## Next Steps

- **[Viewing Reports](Viewing-Reports)** ‚Äî How to access your charts
- **[Email Notifications](Email-Notifications)** ‚Äî Include charts in emails
- **[Configuration](Configuration)** ‚Äî Chart-related settings
